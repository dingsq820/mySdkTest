(()=>{"use strict";var e={1706:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setupMultiplex=t.jsonStringifyStream=t.jsonParseStream=t.ConnectionStream=void 0;const n=r(871),i=s(r(9203)),o=s(r(7304)),u=r(3248),f=s(r(700)),a=()=>{};class c extends u.Duplex{constructor(e,t){super({objectMode:!0}),this._read=a,this._port=e,this._url=t,this._port.addListener("message",this._onMessage.bind(this)),this._port.addListener("disconnect",this._onDisconnect.bind(this))}_onMessage(e){if(n.Buffer.isBuffer(e)){delete e._isBuffer;const t=new n.Buffer(e);this.push(t)}else this.push(e)}_onDisconnect(){this.destroy&&this.destroy()}_write(e,t,r){try{if(n.Buffer.isBuffer(e)){const t=e.toJSON();t._isBuffer=!0,this._port.postMessage(t,this._url)}else this._port.postMessage(e,this._url)}catch(e){return r(new Error("ConnectionStream - disconnected"))}return r()}}t.default=c,t.ConnectionStream=c,t.jsonParseStream=function(){return f.default.obj((function(e,t,r){this.push(JSON.parse(e)),r()}))},t.jsonStringifyStream=function(){return f.default.obj((function(e,t,r){this.push(JSON.stringify(e)),r()}))},t.setupMultiplex=function(e){const t=new i.default;return(0,o.default)(e,t,e,(e=>{e&&console.warn(e)})),t}},871:e=>{e.exports=require("buffer")},9203:e=>{e.exports=require("obj-multiplex")},7304:e=>{e.exports=require("pump")},3248:e=>{e.exports=require("readable-stream")},700:e=>{e.exports=require("through2")}},t={};!function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,r),i.exports}(1706)})();