(()=>{"use strict";var t={2786:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractService=void 0;class s{constructor(){this.name="IService",this.defaultState={},this._state=this.defaultState}get manager(){return this._manager}set manager(t){this._manager=t}set adapter(t){this._adapter=t;const e=null==t?void 0:t.defaultState;e&&(this.defaultState=Object.assign(Object.assign({},this.defaultState),e)),this._state=Object.assign(Object.assign({},this._state),this.defaultState)}get adapter(){return this._adapter}getState(){return this._state}updateState(t={}){this._adapter&&(this._state=Object.assign(Object.assign({},this._state),t),this._adapter.onStateUpdate(this._state,this.name),this._adapter.listeners.forEach((t=>{t&&t(Object.assign({},this._state),this.name)})))}publish(t,e){var s;const a=null===(s=this._manager)||void 0===s?void 0:s.subscribers;if(a){const s=a.get(t);s&&s.forEach((s=>{s(t,e)}))}}}e.AbstractService=s,e.default=s},473:function(t,e,s){var a=this&&this.__awaiter||function(t,e,s,a){return new(s||(s=Promise))((function(i,n){function r(t){try{c(a.next(t))}catch(t){n(t)}}function o(t){try{c(a.throw(t))}catch(t){n(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,o)}c((a=a.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionService=e.POLYGON=void 0;const n=i(s(4809)),r=s(2786);e.POLYGON="polygon";const o=(t,e)=>{const{timeStamp:s,blockNumber:a,to:i,from:n,hash:r}=t;return{chainId:e,status:"confirmed",time:1e3*parseInt(s,10),from:n,to:i,transactionHash:r,blockNumber:a}},c=(t,s)=>{let a="api";t!==e.POLYGON&&(a="api-testnet");let i=`https://${a}.polygonscan.com/api?`;for(const t in s)s[t]&&(i+=`${t}=${s[t]}&`);return i+="tag=latest&page=1",i},u=(t,e)=>a(void 0,void 0,void 0,(function*(){const s=yield(0,n.default)(t,e);if(!s.ok)throw new Error(`Fetch failed with status '${s.status}' for request '${t}'`);return yield s.json()}));class l extends r.AbstractService{constructor(){super(...arguments),this.name="TransactionService"}initialize(){}fetchNftAll(t,e){var s,i;return a(this,void 0,void 0,(function*(){const n=null===(s=this.adapter)||void 0===s?void 0:s.configure().netWorkType,r=null===(i=this.adapter)||void 0===i?void 0:i.configure().chainId;let l="";if(n&&r){const s=yield((t,e,s)=>a(void 0,void 0,void 0,(function*(){const a={module:"account",address:e,startBlock:null==s?void 0:s.fromBlockNum,apikey:null==s?void 0:s.apiKey,order:"desc"},i=c(t,Object.assign(Object.assign({},a),{action:"token1155tx"})),n=u(i),r=c(t,Object.assign(Object.assign({},a),{action:"tokennfttx"})),o=u(r);let[l,d]=yield Promise.all([n,o]);return("0"===l.status||l.result.length<=0)&&(l={status:l.status,result:[]}),("0"===d.status||d.result.length<=0)&&(d={status:d.status,result:[]}),[l,d]})))(n,t,e),[i,d]=s,h=[...i.result.map((t=>o(t,r))),...d.result.map((t=>o(t,r)))];h.sort(((t,e)=>t.time<e.time?-1:1)),h.forEach((e=>a(this,void 0,void 0,(function*(){e.chainId===r&&e.to&&e.to.toLowerCase()===t.toLowerCase()&&e.blockNumber&&(!l||parseInt(l,10)<parseInt(e.blockNumber,10))&&(l=e.blockNumber)})))),this.updateState({transactions:h})}return l}))}}e.TransactionService=l,e.default=l},4809:t=>{t.exports=require("node-fetch")}},e={};!function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,s),n.exports}(473)})();