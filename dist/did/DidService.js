(()=>{"use strict";var e={2786:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractService=void 0;class i{constructor(){this.name="IService",this.defaultState={},this._state=this.defaultState}get manager(){return this._manager}set manager(e){this._manager=e}set adapter(e){this._adapter=e;const t=null==e?void 0:e.defaultState;t&&(this.defaultState=Object.assign(Object.assign({},this.defaultState),t)),this._state=Object.assign(Object.assign({},this._state),this.defaultState)}get adapter(){return this._adapter}getState(){return this._state}updateState(e={}){this._adapter&&(this._state=Object.assign(Object.assign({},this._state),e),this._adapter.onStateUpdate(this._state,this.name),this._adapter.listeners.forEach((e=>{e&&e(Object.assign({},this._state),this.name)})))}publish(e,t){var i;const r=null===(i=this._manager)||void 0===i?void 0:i.subscribers;if(r){const i=r.get(e);i&&i.forEach((i=>{i(e,t)}))}}}t.AbstractService=i,t.default=i},8509:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(4424);class a extends r.DidObject{constructor(e,t,i,r,n,s,d){super(e,t,i,r,n,s,d),this.id=a.ID}static createByDidObject(e){return new a(e.scheme,e.method,e.didSuffix,e.longFormSuffixData,e.signingKeyId,e.published,e.keys)}}a.ID="onlyid",t.default=a},9836:function(e,t,i){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(a,n){function s(e){try{o(r.next(e))}catch(e){n(e)}}function d(e){try{o(r.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,d)}o((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DidService=void 0;const n=i(4424),s=i(2786),d=a(i(8509)),o=a(i(8468));class l extends s.AbstractService{constructor(){super(...arguments),this.name="DidService"}initialize(e){const t=null==e?void 0:e.selectCreator,i=null==e?void 0:e.urlOperation,r=null==e?void 0:e.urlResolve;"string"==typeof i&&(this.didManager=new n.DidManager([new n.IonDidCreaterWithChallenge((0,o.default)(i,"operations"),(0,o.default)(i,"proof-of-work-challenge")),new n.IonDidCreaterNoRegistered,new n.IonDidCreaterNoChallenge((0,o.default)(i,"operations"))],[new n.IonDidResolver(r)]),null!=t&&this.didManager.setCreaterDefault(t))}createDid(e){return r(this,void 0,void 0,(function*(){if(this.didManager)try{const t=yield this.didManager.createDid({signingKeyId:e}),i=d.default.createByDidObject(t);if(i){const{scheme:e,method:t,didSuffix:r}=i;let a;e&&t&&r&&(a=`${e}:${t}:${r}`),this.updateState({didModel:i,did:a})}return i}catch(e){console.error(e)}}))}resolveDid(e){return r(this,void 0,void 0,(function*(){const{didModel:t}=this.getState();if(!this.didManager)return"";const i=yield this.didManager.resolveDid(e),r=JSON.stringify(i,null,2);return(null==t?void 0:t.published)&&i.didDocumentMetadata.method.published&&(t.published=!0,this.updateState({didModel:t})),r}))}clearDid(){this.updateState({didModel:null,did:null})}setDid(e){this.updateState({did:e})}}t.DidService=l,l.RESERVE_ID={RECOVERY:"@RECOVERY",UPDATE:"@UPDATE"},t.default=l},8468:(e,t,i)=>{function r(){return function(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var i=e.shift();e[0]=i+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var a=e[r];if("string"!=typeof a)throw new TypeError("Url must be a string. Received "+a);""!==a&&(r>0&&(a=a.replace(/^[\/]+/,"")),a=r<e.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),t.push(a))}var n=t.join("/"),s=(n=n.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return s.shift()+(s.length>0?"?":"")+s.join("&")}("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}i.r(t),i.d(t,{default:()=>r})},4424:e=>{e.exports=require("dw-did-sdk")}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,i),n.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(9836)})();