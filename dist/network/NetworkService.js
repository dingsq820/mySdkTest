(()=>{"use strict";var t={2786:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractService=void 0;class r{constructor(){this.name="IService",this.defaultState={},this._state=this.defaultState}get manager(){return this._manager}set manager(t){this._manager=t}set adapter(t){this._adapter=t;const e=null==t?void 0:t.defaultState;e&&(this.defaultState=Object.assign(Object.assign({},this.defaultState),e)),this._state=Object.assign(Object.assign({},this._state),this.defaultState)}get adapter(){return this._adapter}getState(){return this._state}updateState(t={}){this._adapter&&(this._state=Object.assign(Object.assign({},this._state),t),this._adapter.onStateUpdate(this._state,this.name),this._adapter.listeners.forEach((t=>{t&&t(Object.assign({},this._state),this.name)})))}publish(t,e){var r;const i=null===(r=this._manager)||void 0===r?void 0:r.subscribers;if(i){const r=i.get(t);r&&r.forEach((r=>{r(t,e)}))}}}e.AbstractService=r,e.default=r},8251:function(t,e,r){var i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(s,a){function n(t){try{u(i.next(t))}catch(t){a(t)}}function o(t){try{u(i.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?s(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(n,o)}u((i=i.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkService=e.NetworksChainId=void 0;const a=r(9757),n=s(r(9622)),o=s(r(8725)),u=r(2786);var c;(c=e.NetworksChainId||(e.NetworksChainId={})).rpc="",c.polygon="137",c.mumbai="80001";class h extends u.AbstractService{constructor(){super(...arguments),this.name="NetworkService",this.mutex=new a.Mutex}initialize(t){this.updateState({network:"loading"});const e={chainId:null==t?void 0:t.chainId,engineParams:{pollingInterval:12e3},nickname:null==t?void 0:t.nickname,rpcUrl:null==t?void 0:t.rpcTarget,ticker:null==t?void 0:t.ticker};this.provider=(0,o.default)(e),this.provider.on("error",this.onNetworkError.bind(this)),this.ethQuery=new n.default(this.provider),this.updateNetwork()}onNetworkError(){"loading"===this.getState().network&&this.updateNetwork()}updateNetwork(){return i(this,void 0,void 0,(function*(){if(!this.ethQuery||!this.ethQuery.sendAsync)return;const t=yield this.mutex.acquire();this.ethQuery.sendAsync({method:"net_version"},((e,r)=>{this.updateState({network:e?"loading":r}),t()}))}))}}e.NetworkService=h,e.default=h},9757:t=>{t.exports=require("async-mutex")},9622:t=>{t.exports=require("eth-query")},8725:t=>{t.exports=require("web3-provider-engine/zero")}},e={};!function r(i){var s=e[i];if(void 0!==s)return s.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,r),a.exports}(8251)})();